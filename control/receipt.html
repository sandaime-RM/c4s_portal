<!DOCTYPE html>
<html lang="ja">
<head>

    <!--Bootstrap-->
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <!--BootstrapIcon-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.0/font/bootstrap-icons.css">
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C4's Portal</title>
</head>
<body style="width: 280px">
    <header class="pt-3 px-3 text-center">
        <img src="../img/logo_mini.png" width="60px">
        <div class="d-inline-block align-middle text-start">
            <span class="fw-bold fs-5">メディアアートサークル</span><br><span class="fw-bold fs-3">C4's</span>
        </div>
        <br>
        <div class="px-2 pt-3 d-inline-block">
            <p class="text-start">
                野田本部<br>千葉県野田市山崎２６４１<br>
                Eメール : hello@c4-s.net<br>
            </p>
        </div>
    </header>

    <main class="pt-2 px-4 text-center" >
        <h4 style="letter-spacing: 4px;" class="text-center">領収書</h4>
        <div class="text-start" id="date"></div>
        <div class="d-inline-block">
            <div class="row py-2">
                <div class="col-8 text-start" id="title"></div>
                <div class="col-4 text-end">￥<span id="price"></span></div>
            </div>
            <div>------------------------------------</div>

            <div class="row py-1 px-2 fw-bold fs-5">
                <div class="col-8 text-start" style="letter-spacing: 12px;">合計</div>
                <div class="col-4 text-end">￥<span id="price2"></span></div>
            </div>

            <div class="row py-1">
                <div class="col-8 text-start">お預かり</div>
                <div class="col-4 text-end">￥<span id="given"></span></div>
            </div>
            <div class="row py-1">
                <div class="col-8 text-start">お釣り</div>
                <div class="col-4 text-end">￥<span id="change"></span></div>
            </div>

            <div>------------------------------------</div>

            <div class="mt-2">部費の情報はこちらから↓</div>
            <img src="../img/moneyQR.png" width="140px">

        </div>
    </main>

    <!-- 印刷 -->
    <script>
        window.onload = function() {
            const price = getParam("price");
            const given = getParam("given");
            const title = getParam("title");

            document.getElementById("title").textContent = title;
            document.getElementById("price").textContent = Number(price).toLocaleString();
            document.getElementById("price2").textContent = Number(price).toLocaleString();
            document.getElementById("given").textContent = Number(given).toLocaleString();
            document.getElementById("change").textContent = Number(given - price).toLocaleString();

            document.getElementById("date").textContent = (new Date()).toLocaleString();

            window.print();
        }

        /**
         * Get the URL parameter value
         *
         * @param  name {string} パラメータのキー文字列
         * @return  url {url} 対象のURL文字列（任意）
         */
        function getParam(name, url) {
            if (!url) url = window.location.href;
            name = name.replace(/[\[\]]/g, "\\$&");
            var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, " "));
        }
    </script>

    <style>
        @media print {
            @page {
                margin : 0;
                size: 58mm 130mm;
            }
        }
    </style>
</body>
</html>